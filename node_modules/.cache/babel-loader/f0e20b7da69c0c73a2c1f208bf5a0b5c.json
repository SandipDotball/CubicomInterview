{"ast":null,"code":"var raf = typeof requestAnimationFrame === \"undefined\" ? function (callback) {\n  return setTimeout(callback, 17);\n} : requestAnimationFrame;\nexport var runInFrame = function (no, callback) {\n  var cur = 0;\n  var canceled = false;\n\n  var loop = function () {\n    if (canceled) {\n      return;\n    }\n\n    if (cur <= no) {\n      cur++;\n      raf(loop);\n      return;\n    }\n\n    callback();\n  };\n\n  loop();\n  return function () {\n    canceled = true;\n  };\n};\nexport default runInFrame;","map":{"version":3,"sources":["utils/runInFrame.ts"],"names":[],"mappings":"AAAA,IAAM,GAAG,GAAG,OAAO,qBAAP,KAAiC,WAAjC,GACR,UAAC,QAAD,EAAmB;AAAK,SAAA,UAAU,CAAC,QAAD,EAAV,EAAU,CAAV;AAAwB,CADxC,GAER,qBAFJ;AAIA,OAAO,IAAM,UAAU,GAAG,UAAC,EAAD,EAAa,QAAb,EAA+B;AACvD,MAAI,GAAG,GAAG,CAAV;AACA,MAAI,QAAQ,GAAG,KAAf;;AACA,MAAM,IAAI,GAAG,YAAA;AACX,QAAI,QAAJ,EAAc;AACZ;AACD;;AACD,QAAI,GAAG,IAAI,EAAX,EAAe;AACb,MAAA,GAAG;AACH,MAAA,GAAG,CAAC,IAAD,CAAH;AACA;AACD;;AACD,IAAA,QAAQ;AACT,GAVD;;AAWA,EAAA,IAAI;AACJ,SAAO,YAAA;AAAQ,IAAA,QAAQ,GAAG,IAAX;AAAkB,GAAjC;AACD,CAhBM;AAkBP,eAAe,UAAf","sourcesContent":["const raf = typeof requestAnimationFrame === \"undefined\"\n  ? (callback: Function) => setTimeout(callback, 17)\n  : requestAnimationFrame;\n\nexport const runInFrame = (no: number, callback: Function) => {\n  let cur = 0;\n  let canceled = false;\n  const loop = () => {\n    if (canceled) {\n      return;\n    }\n    if (cur <= no) {\n      cur++;\n      raf(loop);\n      return;\n    }\n    callback();\n  };\n  loop();\n  return () => { canceled = true; };\n};\n\nexport default runInFrame;\n"]},"metadata":{},"sourceType":"module"}